{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "_macros.html" as macros %}

{% block title %}Gallery{% endblock %}
{% block page_content %}
 
<!-- 搜索栏 -->
<div>
     <!--示例 {{ wtf.quick_form(form, id='loginform', action='/login', form_type='horizontal', horizontal_columns=('lg',4,4)) }} -->
    {%if form%}
    {{ wtf.quick_form(form,id="searchForm") }}
    {%endif%}
    <br>
</div>
<hr>
<p>进入</p>
<a href="/toplog" class="toplog">收藏网址</a>
<a href="/?dir_num=-1" class="dir">目录</a>
<a href="/?like=True" class="dir">喜欢</a>
 <hr>
<p>筛选</p>
<a href="">test</a>
<form method="POST" class="form-inline" id="fform">
    {% for field in fform %}
      <div class="form-group mx-2 mb-3">
        {{ field.label(class="mr-2") }}
        {{ field( ) }}
      </div>
    {% endfor %}
     
  </form>
 
<hr>
<script>
    const form = document.getElementById('fform')
    function sendGetRequest(url) {
  return axios.get(url)
    .then(function(response) {
      // 返回响应数据，在调用此函数时可对其进行处理
      return response.data;
    })
    .catch(function(error) {
      console.log('请求失败: ', error);
    });
}

form.addEventListener('change', (event) => {
    const items=form.elements.media_type
    let checkitem;
    items.forEach((item)=>{
        if (item.checked){
            checkitem=item
            
        }
    })
    let url='/media/'+checkitem.value
    // sendGetRequest(url)
    clickVirtualA(url)
  
})
</script>
<!-- 展示列表 -->
<div class="post-tabs">
    {%if pages and spend_time%} <h1>获取数据{{pages}}  db耗时：{{spend_time}} {%if type%}类型：{{type}}  {%endif%}</h1>{%endif%}
    <!-- 路径链接 -->
    {%if dirs_data%}
    <a href={{url_for(endpoint, dir_num = dirs_data['parent'].id, **kwargs_link)}}>上级目录</a>
    <a href={{url_for(endpoint, dir_num = dirs_data['current'].id, **kwargs_link)}}>当前目录：{{dirs_data['current'].path}}</a>
    {% for i in dirs_data['dirs'] %}
       
    <li  class="col  ">
        <a href={{url_for(endpoint, dir_num = i.id, **kwargs_link)}}>{{i.vpath}}</a>
    </li>
     {% endfor %}
    {%endif%}
    {% block posts %}
    <!-- 视频 -->
    <div class="row row-cols-2 row-cols-sm-2 row-cols-md-5 g-3">

        {% for post in pagination.items %}
       {{ macros.imgview_widget( post  ) }}
        {% endfor %}
    <div>
    
    </div>
  
    {% endblock %}
     

<!-- 分页列表 -->
{% if pagination %}
<div class="pagination">
    <!-- 链家加搜索参数 -->
      {%if kwargs_page %}
          {{ macros.pagination_widget(pagination, endpoint,kwargs=kwargs_page) }}
        {%else %}
            {{ macros.pagination_widget(pagination, endpoint) }}
         
        {%endif %}
</div>
{% endif %}
 
{% endblock %}
